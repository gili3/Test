<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ููุญุฉ ุชุญูู - Queen Beauty</title>
    
    <!-- Firebase Modular SDK -->
    <script type="module" id="firebase-sdk-module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, setPersistence, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, collection, getDoc, getDocs, setDoc, updateDoc, deleteDoc, query, where, orderBy, onSnapshot, serverTimestamp, addDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, uploadBytesResumable } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        window.firebaseModules = {
            initializeApp,
            getAuth,
            onAuthStateChanged,
            signOut,
            setPersistence,
            browserSessionPersistence,
            getFirestore,
            doc,
            collection,
            getDoc,
            getDocs,
            setDoc,
            updateDoc,
            deleteDoc,
            addDoc,
            query,
            where,
            orderBy,
            onSnapshot,
            serverTimestamp,
            increment,
            getStorage,
            ref,
            uploadBytes,
            getDownloadURL,
            uploadBytesResumable
        };
        console.log("โ Firebase Modules Loaded in Admin");
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="css-security.css">
    <script>
        // ุญูุงูุฉ ุตูุญุฉ ุงูุฃุฏูู ูู ุงููุญุต ูุงููุณุฎ
        (function() {
            document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
            document.onkeydown = function(e) {
                if (e.keyCode == 123 || 
                    (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || 
                    (e.ctrlKey && e.keyCode == 85)) {
                    return false;
                }
            };
            document.addEventListener('dragstart', function(e) { if (e.target.nodeName === 'IMG') e.preventDefault(); });
        })();
    </script>
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="header-logo">
            <img src="https://i.ibb.co/fVn1SghC/file-00000000cf8071f498fc71b66e09f615.png" alt="Logo">
            <span>ููุญุฉ ุงูุชุญูู</span>
        </div>
        <div class="header-actions" style="display: flex; gap: 10px; align-items: center;">
            <button class="admin-tab" onclick="window.location.href='index.html'" style="border: 1px solid var(--border-color); background: white; padding: 8px 15px;">
                <i class="fas fa-external-link-alt"></i> ุนุฑุถ ุงููุชุฌุฑ
            </button>
            <button onclick="logoutAdmin()" class="logout-admin-btn">
                <i class="fas fa-sign-out-alt"></i> ุฎุฑูุฌ
            </button>
        </div>
    </header>

    <div class="admin-container">
        <!-- ุงูุชุจููุจุงุช ุงููุจุณุทุฉ ุชุญุช ุงูููุฏุฑ -->
        <div class="admin-tabs">
            <button class="admin-tab active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i> ุงูุฅุญุตุงุฆูุงุช
            </button>
            <button class="admin-tab" data-tab="productsManagement">
                <i class="fas fa-boxes"></i> ุงูููุชุฌุงุช
            </button>
            <button class="admin-tab" data-tab="ordersManagement">
                <i class="fas fa-shopping-cart"></i> ุงูุทูุจุงุช
            </button>
            <button class="admin-tab" data-tab="usersManagement">
                <i class="fas fa-users"></i> ุงููุณุชุฎุฏููู
            </button>
            <button class="admin-tab" data-tab="settingsManagement">
                <i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช
            </button>
            <button class="admin-tab" data-tab="themeManagement">
                <i class="fas fa-palette"></i> ุงููุธูุฑ
            </button>
        </div>

        <!-- ูุญุชูู ุงูุฅุญุตุงุฆูุงุช (ุงูุฑุฆูุณูุฉ) -->
        <div id="dashboard" class="admin-tab-content active">
            <div class="admin-stats">
                <div class="admin-stat-card">
                    <div class="stat-icon users"><i class="fas fa-users"></i></div>
                    <div class="stat-details">
                        <h3 id="adminUsersCount">0</h3>
                        <p>ุงููุณุชุฎุฏููู</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon products"><i class="fas fa-box"></i></div>
                    <div class="stat-details">
                        <h3 id="adminProductsCount">0</h3>
                        <p>ุงูููุชุฌุงุช ุงููุดุทุฉ</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon orders"><i class="fas fa-shopping-cart"></i></div>
                    <div class="stat-details">
                        <h3 id="adminCompletedOrdersCount">0</h3>
                        <p>ุงูุทูุจุงุช ุงูููุชููุฉ</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon sales"><i class="fas fa-dollar-sign"></i></div>
                    <div class="stat-details">
                        <h3 id="adminTotalSales">0 SDG</h3>
                        <p>ุฅุฌูุงูู ุงููุจูุนุงุช</p>
                    </div>
                </div>
            </div>

            <!-- ุงูููุชุฌุงุช ุงูุฃูุซุฑ ูุจูุนุงู -->
            <div class="top-products-card">
                <div class="top-products-header">
                    <i class="fas fa-fire" style="color: #e67e22;"></i>
                    <h3>ุงูููุชุฌุงุช ุงูุฃูุซุฑ ูุจูุนุงู</h3>
                </div>
                <div id="topProductsList" class="top-products-container">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช -->
        <div class="admin-tab-content" id="productsManagement">
            <div class="tab-header">
                <h3>ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h3>
                <button class="add-product-btn" id="addProductBtn">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                </button>
            </div>
            
            <div class="products-list" id="adminProductsList">
                <!-- ุณูุชู ุชุนุจุฆุชูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
        </div>

        <!-- ุฅุฏุงุฑุฉ ุงูุทูุจุงุช -->
        <div class="admin-tab-content" id="ordersManagement">
            <div class="tab-header">
                <h3>ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</h3>
                <div class="filter-group" style="display: flex; gap: 10px;">
                    <select id="orderStatusFilter" onchange="handleAdminOrderFilterChange(this.value)" style="padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); font-family: 'Cairo'; min-width: 150px;">
                        <option value="all">ุฌููุน ุงูุญุงูุงุช</option>
                        <option value="pending">ููุฏ ุงูุงูุชุธุงุฑ</option>
                        <option value="paid">ุชู ุงูุฏูุน</option>
                        <option value="processing">ุฌุงุฑู ุงูุชุฌููุฒ</option>
                        <option value="shipped">ุฎุฑุฌ ููุชูุตูู</option>
                        <option value="delivered">ุชู ุงูุชุณููู</option>
                        <option value="cancelled">ููุบู</option>
                    </select>
                </div>
            </div>
            
            <div class="orders-list" id="adminOrdersList">
                <!-- ุณูุชู ุชุนุจุฆุชูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู -->
        <div class="admin-tab-content" id="usersManagement">
            <h3>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
            <div class="users-list" id="adminUsersList">
                <!-- ุณูุชู ุชุนุจุฆุชูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
        </div>
        
        <!-- ุฅุนุฏุงุฏุงุช ุงููููุน -->
        <div class="admin-tab-content" id="settingsManagement">
            <h3>ุฅุนุฏุงุฏุงุช ุงููููุน</h3>
            <div class="settings-form">
                <div id="settingsForm">
                    <!-- ุณูุชู ุชุนุจุฆุชูุง ุจูุงุณุทุฉ JavaScript -->
                </div>
                <button class="btn-primary" id="saveSettingsBtn" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-save"></i> ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                </button>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงููุธูุฑ -->
        <div class="admin-tab-content" id="themeManagement">
            <h3>ุฅุฏุงุฑุฉ ุงูุฃููุงู ูุงูุชุตููู</h3>
            <div class="settings-form">
                <h4><i class="fas fa-palette"></i> ุฃููุงู ุงููุชุฌุฑ</h4>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--primary-color);"></div>
                    <div class="color-inputs">
                        <label>ุงูููู ุงูุฃุณุงุณู</label>
                        <input type="color" id="primaryColor" value="#1C1C1C">
                        <input type="text" id="primaryColorHex" value="#1C1C1C" placeholder="#1C1C1C" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ุงูููู ุงูุฃุณุงุณู</h5>
                        <p>ูุณุชุฎุฏู ูู ุงููุตูุต ูุงูุนูุงููู ุงูุฑุฆูุณูุฉ</p>
                    </div>
                </div>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--secondary-color);"></div>
                    <div class="color-inputs">
                        <label>ุงูููู ุงูุซุงููู</label>
                        <input type="color" id="secondaryColor" value="#555555">
                        <input type="text" id="secondaryColorHex" value="#555555" placeholder="#555555" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ุงูููู ุงูุซุงููู</h5>
                        <p>ูุณุชุฎุฏู ูู ุงูุฃุฒุฑุงุฑ ูุงูุนูุงุตุฑ ุงูุชูุงุนููุฉ</p>
                    </div>
                </div>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--success-color);"></div>
                    <div class="color-inputs">
                        <label>ููู ุงููุฌุงุญ</label>
                        <input type="color" id="successColor" value="#27ae60">
                        <input type="text" id="successColorHex" value="#27ae60" placeholder="#27ae60" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ููู ุงููุฌุงุญ</h5>
                        <p>ูุณุชุฎุฏู ููุฅุดุนุงุฑุงุช ุงููุงุฌุญุฉ ูุงูุนูุงุตุฑ ุงูุฅูุฌุงุจูุฉ</p>
                    </div>
                </div>

                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--button-press-color);"></div>
                    <div class="color-inputs">
                        <label>ููู ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ</label>
                        <input type="color" id="buttonPressColor" value="#555555">
                        <input type="text" id="buttonPressColorHex" value="#555555" placeholder="#555555" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ููู ุงูุถุบุท</h5>
                        <p>ูุณุชุฎุฏู ุนูุฏ ุงูููุฑ ุนูู ุงูุฃุฒุฑุงุฑ ูุงูุนูุงุตุฑ ุงูุชูุงุนููุฉ</p>
                    </div>
                </div>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--danger-color);"></div>
                    <div class="color-inputs">
                        <label>ููู ุงูุฎุทุฃ</label>
                        <input type="color" id="dangerColor" value="#e74c3c">
                        <input type="text" id="dangerColorHex" value="#e74c3c" placeholder="#e74c3c" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ููู ุงูุฎุทุฃ</h5>
                        <p>ูุณุชุฎุฏู ููุฅุดุนุงุฑุงุช ุงูุฎุทุฃ ูุงูุฃุฒุฑุงุฑ ุงูุญูุฑุงุก</p>
                    </div>
                </div>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--warning-color);"></div>
                    <div class="color-inputs">
                        <label>ููู ุงูุชุญุฐูุฑ</label>
                        <input type="color" id="warningColor" value="#f39c12">
                        <input type="text" id="warningColorHex" value="#f39c12" placeholder="#f39c12" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ููู ุงูุชุญุฐูุฑ</h5>
                        <p>ูุณุชุฎุฏู ููุชุญุฐูุฑุงุช ูุงูุนูุงุตุฑ ุงูุชุญุฐูุฑูุฉ</p>
                    </div>
                </div>
                
                <div class="color-input-group">
                    <div class="color-preview" style="background: var(--light-color); border: 2px solid var(--border-color);"></div>
                    <div class="color-inputs">
                        <label>ููู ุงูุฎูููุฉ</label>
                        <input type="color" id="lightColor" value="#F7F5F2">
                        <input type="text" id="lightColorHex" value="#F7F5F2" placeholder="#F7F5F2" style="margin-top: 5px;">
                    </div>
                    <div class="color-info">
                        <h5>ููู ุงูุฎูููุฉ</h5>
                        <p>ูุณุชุฎุฏู ูู ุฎูููุงุช ุงูุนูุงุตุฑ ูุงูุฃูุณุงู</p>
                    </div>
                </div>
                
                <button class="btn-primary" id="saveColorsBtn" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-save"></i> ุญูุธ ุงูุฃููุงู
                </button>
                
                <button class="btn-secondary" id="resetColorsBtn" style="width: 100%; margin-top: 10px;">
                    <i class="fas fa-undo"></i> ุงุณุชุนุงุฏุฉ ุงูุฃููุงู ุงูุงูุชุฑุงุถูุฉ
                </button>
                
                <div style="background: var(--light-color); padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid var(--border-color);">
                    <h5 style="margin-bottom: 10px;"><i class="fas fa-info-circle"></i> ููุงุญุธุฉ ูููุฉ</h5>
                    <p style="font-size: 14px; color: var(--gray-color); line-height: 1.6;">
                        ููู ุงูุฃุฒุฑุงุฑ ุนูุฏ ุงูุถุบุท ูุชู ุชุทุจููู ุชููุงุฆูุงู ุนูู ุฌููุน ุงูุฃุฒุฑุงุฑ ูู ุงููููุน ูุงููุชุฌุฑ. 
                        ุชุฃูุฏ ูู ุงุฎุชูุงุฑ ููู ูุชูุงุณุจ ูุน ุงูููู ุงูุซุงููู ููููุฑ ุชุจุงูููุง ุฌูุฏูุง ูููุณุชุฎุฏููู.
                    </p>
                </div>
                
                <div class="preview-section">
                    <h4>ูุนุงููุฉ ุงูุฃููุงู</h4>
                    <div class="preview-elements">
                        <div class="preview-element preview-primary">ุฃุณุงุณู</div>
                        <div class="preview-element preview-secondary">ุซุงููู</div>
                        <div class="preview-element preview-success">ูุฌุงุญ</div>
                        <div class="preview-element preview-danger">ุฎุทุฃ</div>
                        <div class="preview-element preview-warning">ุชุญุฐูุฑ</div>
                        <div class="preview-element preview-light">ุฎูููุฉ</div>
                        <button class="preview-element preview-button-press" id="previewButtonPress" style="cursor: pointer; font-weight: 600;">ุงุถุบุท ููุง</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุฅุถุงูุฉ/ุชุนุฏูู ููุชุฌ -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName">ุงุณู ุงูููุชุฌ *</label>
                        <input type="text" id="productName" required placeholder="ุฃุฏุฎู ุงุณู ุงูููุชุฌ">
                    </div>
                    <div class="form-group">
                        <label for="productPrice">ุงูุณุนุฑ (SDG) *</label>
                        <input type="number" id="productPrice" min="0" step="0.01" required placeholder="0.00">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productCategory">ุงููุฆุฉ *</label>
                        <select id="productCategory" required>
                            <option value="">ุงุฎุชุฑ ุงููุฆุฉ</option>
                            <option value="perfume">ุนุทูุฑ</option>
                            <option value="makeup">ูููุงุฌ</option>
                            <option value="skincare">ุนูุงูุฉ ุจุงูุจุดุฑุฉ</option>
                            <option value="haircare">ุนูุงูุฉ ุจุงูุดุนุฑ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="productStock">ุงููููุฉ ูู ุงููุฎุฒู *</label>
                        <input type="number" id="productStock" min="0" required placeholder="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">ูุตู ุงูููุชุฌ</label>
                    <textarea id="productDescription" rows="3" placeholder="ุฃุฏุฎู ูุตู ุงูููุชุฌ..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="productImage">ุตูุฑุฉ ุงูููุชุฌ *</label>
                    <div class="image-upload-container" id="productImageUploadContainer" onclick="document.getElementById('productImageFile').click()">
                        <div class="upload-placeholder" id="productImagePlaceholder">
                            <i class="fas fa-image"></i>
                            <span>ุงุฑูุน ุตูุฑุฉ ุงูููุชุฌ</span>
                            <p>ุงุถุบุท ููุง ูุงุฎุชูุงุฑ ุงูุตูุฑุฉ</p>
                        </div>
                        <div class="image-preview-container" id="productImagePreviewContainer">
                            <img id="productImagePreview" src="" alt="ูุนุงููุฉ">
                            <button type="button" class="remove-image-btn" onclick="event.stopPropagation(); removeProductImagePreview()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="file" id="productImageFile" accept="image/*" style="display: none;" onchange="handleProductImageUpload(this)">
                    </div>
                    
                    <div class="upload-progress-container" id="productUploadProgressContainer">
                        <div class="progress-info">
                            <span id="productUploadStatus">ุฌุงุฑู ุงูุฑูุน...</span>
                            <span id="productProgressText">0%</span>
                        </div>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-fill" id="productProgressFill"></div>
                        </div>
                    </div>
                    <input type="hidden" id="productImage" required>
                </div>
                
                <div class="form-checkboxes">
                    <label class="checkbox-label">
                        <input type="checkbox" id="productIsNew">
                        <span>ููุชุฌ ุฌุฏูุฏ</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="productIsSale">
                        <span>ูู ุนุฑุถ ุฎุงุต</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="productIsBest">
                        <span>ุงูุฃูุถู ูุจูุนุงู</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="productIsActive" checked>
                        <span>ููุชุฌ ูุดุท</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
                <button class="btn-primary" id="saveProductBtn">ุญูุธ ุงูููุชุฌ</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชุฃููุฏ -->
    <div id="confirmModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>ุชุฃููุฏ ุงูุนูููุฉ</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; padding: 20px;">
                    <i class="fas fa-exclamation-triangle fa-3x" style="color: var(--warning-color); margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 10px;" id="confirmTitle">ูู ุฃูุช ูุชุฃูุฏุ</h3>
                    <p style="color: var(--gray-color);" id="confirmMessage">ุณูุชู ุชุนุทูู ุงูููุชุฌ ูุนุฏู ุนุฑุถู ูู ุงููุชุฌุฑ</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
                <button class="btn-danger" onclick="deleteProductConfirmed()" style="background: var(--danger-color); color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-family: 'Cairo';">
                    ูุนูุ ุชุนุทูู
                </button>
            </div>
        </div>
    </div>

    <script>
        // ุชููุฆุฉ ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ ูุจู ุชุญููู ุงูุณูุฑุจุชุงุช
        window.isAdmin = false;
    </script>
    
    <!-- JavaScript Files -->
    <script src="js/security-core.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/admin-orders-system.js"></script>
    <script src="js/admin-pagination-system.js"></script>
    <script>
        // ูุธุงู ุงูุชุญููู ุงูุฐูู (Lazy Loading) ูููุญุฉ ุงูุชุญูู - ุงูุฅุตุฏุงุฑ ุงูุงุญุชุฑุงูู
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.admin-tab');
            const loadedSections = new Set(['dashboard']); // ุงูุฅุญุตุงุฆูุงุช ุชุญูู ุงูุชุฑุงุถูุงู

            tabs.forEach(tab => {
                tab.addEventListener('click', async function() {
                    const tabId = this.getAttribute('data-tab');
                    if (!tabId) return;

                    // ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุจููุจุงุช (UI)
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    const targetContent = document.getElementById(tabId);
                    if (targetContent) targetContent.classList.add('active');

                    // ุงูุชุญููู ุงูุฐูู ููุจูุงูุงุช (Data) - ุงูุชุญููู ููุฑุฉ ูุงุญุฏุฉ ููุท ุฃู ุนูุฏ ุงูุญุงุฌุฉ
                    if (!loadedSections.has(tabId) || tabId === 'ordersManagement') {
                        console.log(`๐ [Admin LazyLoad] ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงููุณู: ${tabId}`);
                        
                        switch(tabId) {
                            case 'productsManagement':
                                if (typeof loadAdminProducts === 'function') await loadAdminProducts(1);
                                break;
                            case 'ordersManagement':
                                // ุงูุทูุจุงุช ุชุญูู ุฏุงุฆูุงู ูุถูุงู ุฑุคูุฉ ุฃุญุฏุซ ุงูุทูุจุงุช ููุฑุงู
                                if (typeof loadAdminOrders === 'function') await loadAdminOrders(1, 'all');
                                break;
                            case 'usersManagement':
                                if (typeof loadAdminUsers === 'function') await loadAdminUsers(1);
                                break;
                            case 'settingsManagement':
                                if (typeof loadAdminSettings === 'function') await loadAdminSettings();
                                break;
                            case 'dashboard':
                                if (typeof loadAdminStats === 'function') await loadAdminStats();
                                break;
                        }
                        loadedSections.add(tabId);
                    }
                });
            });
        });
    </script>